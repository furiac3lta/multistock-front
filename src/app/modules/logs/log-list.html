<div class="log-container">

  <div class="header">
    <h2>Auditoría de movimientos</h2>

    <input placeholder="Buscar por cualquier dato..." [(ngModel)]="search" (input)="filter()">
  </div>

  <div class="table-card">
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Usuario</th>
        <th>Producto</th>
        <th>Acción</th>
        <th>Cantidad</th>
        <th>Descripción</th>
        <th>Sucursal Origen</th>
        <th>Sucursal Destino</th>
        <th>Antes</th>
        <th>Después</th>
        <th>IP</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let l of filtered">

        <td>{{ l.createdAt | date: 'short' }}</td>

        <td>{{ l.username }}</td>

        <td>{{ l.productName }}</td>

        <!-- Etiquetas visuales -->
        <td>
          <span [ngClass]="{
    'tag-inc': (l.movementType || '').startsWith('TRANSFER_IN') || (l.movementType || '').endsWith('INCREASE'),
    'tag-dec': (l.movementType || '').startsWith('TRANSFER_OUT') || (l.movementType || '').endsWith('DECREASE')
      }">
            {{ l.movementType || '-' }}
          </span>

        </td>

        <td>{{ l.quantity }}</td>

        <td>{{ l.description || '-' }}</td>

        <td>{{ l.originBranchName || '-' }}</td>

        <td>{{ l.branchName }}</td>

        <td>{{ l.beforeStock }}</td>

        <td>{{ l.afterStock }}</td>

        <td>{{ l.ip }}</td>
      </tr>
    </tbody>
  </table>
  </div>
</div>